var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t){void 0===t&&(t=!1);var r=window.crypto.getRandomValues(new Uint32Array(1))[0],n="_".concat(r);return Object.defineProperty(window,n,{value:function(r){return t&&Reflect.deleteProperty(window,n),null==e?void 0:e(r)},writable:!1,configurable:!0}),r}function r(r,n){return void 0===n&&(n={}),function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{i(n.next(e))}catch(e){a(e)}}function p(e){try{i(n.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,p)}i((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(a){return function(p){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,p])}}}(this,(function(o){return[2,new Promise((function(o,a){var s=t((function(e){o(e),Reflect.deleteProperty(window,"_".concat(p))}),!0),p=t((function(e){a(e),Reflect.deleteProperty(window,"_".concat(s))}),!0);window.__TAURI_IPC__(e({cmd:r,callback:s,error:p},n))}))]}))}))}Object.freeze({__proto__:null,transformCallback:t,invoke:r,convertFileSrc:function(e,t){void 0===t&&(t="asset");var r=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?"https://".concat(t,".localhost/").concat(r):"".concat(t,"://").concat(r)}});class n{constructor(e,t){this.type=e,this.payload=t}static generic(e,t){return new n("Generic",{vault:e,record:t})}static counter(e,t){return new n("Counter",{vault:e,counter:t})}}function o(e){return r("plugin:stronghold|set_password_clear_interval",{interval:e})}class a{constructor(e,t){this.path=e,this.name=t}getVault(e){return new p(this.path,this.name,e)}getStore(){return new s(this.path,this.name)}}class s{constructor(e,t){this.path=e,this.client=t}get(e){return r("plugin:stronghold|get_store_record",{snapshotPath:this.path,client:this.client,key:e})}insert(e,t,n){return r("plugin:stronghold|save_store_record",{snapshotPath:this.path,client:this.client,key:e,value:t,lifetime:n})}remove(e){return r("plugin:stronghold|remove_store_record",{snapshotPath:this.path,client:this.client,key:e})}}class p extends class{constructor(e){this.procedureArgs=e}generateSLIP10Seed(e,t){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Generate",payload:{output:e,sizeBytes:t}}})}deriveSLIP10(e,t,n,o){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Derive",payload:{chain:e,input:{type:t,payload:n},output:o}}})}recoverBIP39(e,t,n){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Recover",payload:{mnemonic:e,passphrase:n,output:t}}})}generateBIP39(e,t){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Generate",payload:{output:e,passphrase:t}}})}getEd25519PublicKey(e){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"PublicKey",payload:{type:"Ed25519",privateKey:e}}})}signEd25519(e,t){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"Ed25519Sign",payload:{privateKey:e,msg:t}}})}}{constructor(e,t,r){super({snapshotPath:e,client:t,vault:r}),this.path=e,this.client=t,this.name=r}insert(e,t){return r("plugin:stronghold|save_secret",{snapshotPath:this.path,client:this.client,vault:this.name,recordPath:e,secret:t})}remove(e){return r("plugin:stronghold|remove_secret",{snapshotPath:this.path,client:this.client,vault:this.name,location:e})}}class i{constructor(e){this.path=e}connect(e){return r("plugin:stronghold|p2p_connect",{snapshotPath:this.path,peer:e})}serve(){return r("plugin:stronghold|p2p_serve",{snapshotPath:this.path})}send(e,t,n){return r("plugin:stronghold|p2p_send",{snapshotPath:this.path,peer:e,client:t,request:n})}getSnapshotHierarchy(e,t){return this.send(e,t,{type:"SnapshotRequest",payload:{request:{type:"GetRemoteHierarchy"}}})}checkVault(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"CheckVault",payload:{vaultPath:r}}}})}checkRecord(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"CheckRecord",payload:{location:r}}}})}writeToVault(e,t,r,n){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"WriteToVault",payload:{location:r,payload:n}}}})}revokeData(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"RevokeData",payload:{location:r}}}})}deleteData(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"DeleteData",payload:{location:r}}}})}readFromStore(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"ReadFromStore",payload:{key:r}}}})}writeToStore(e,t,r,n,o){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"WriteToStore",payload:{key:r,payload:n,lifetime:o}}}})}deleteFromStore(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"DeleteFromStore",payload:{key:r}}}})}generateSLIP10Seed(e,t,r,n){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"SLIP10Generate",payload:{output:r,sizeBytes:n}}]}}}})}deriveSLIP10(e,t,r,n,o,a){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"SLIP10Derive",payload:{chain:r,input:{type:n,payload:o},output:a}}]}}}})}recoverBIP39(e,t,r,n,o){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"BIP39Recover",payload:{mnemonic:r,passphrase:o,output:n}}]}}}})}generateBIP39(e,t,r,n){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"BIP39Generate",payload:{output:r,passphrase:n}}]}}}})}getEd25519PublicKey(e,t,r){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"PublicKey",payload:{type:"Ed25519",privateKey:r}}]}}}})}signEd25519(e,t,r,n){return this.send(e,t,{type:"ClientRequest",payload:{request:{type:"Procedures",payload:{procedures:[{type:"Ed25519Sign",payload:{privateKey:r,msg:n}}]}}}})}stop(){return r("plugin:stronghold|p2p_stop",{snapshotPath:this.path})}startListening(e){return r("plugin:stronghold|p2p_start_listening",{snapshotPath:this.path,addr:e})}stopListening(){return r("plugin:stronghold|p2p_stop_listening",{snapshotPath:this.path})}addPeerAddr(e,t){return r("plugin:stronghold|p2p_add_peer",{snapshotPath:this.path,peerId:e,addr:t})}}class u{constructor(e,t){this.path=e,this.reload(t)}reload(e){return r("plugin:stronghold|initialize",{snapshotPath:this.path,password:e})}unload(){return r("plugin:stronghold|destroy",{snapshotPath:this.path})}loadClient(e){return r("plugin:stronghold|load_client",{snapshotPath:this.path,client:e}).then((()=>new a(this.path,e)))}createClient(e){return r("plugin:stronghold|create_client",{snapshotPath:this.path,client:e}).then((()=>new a(this.path,e)))}save(){return r("plugin:stronghold|save",{snapshotPath:this.path})}spawnCommunication(e,t,n){return r("plugin:stronghold|p2p_spawn",{snapshotPath:this.path,client:e,config:t,keypair:n}).then((()=>new i(this.path)))}}export{a as Client,i as Communication,n as Location,s as Store,u as Stronghold,p as Vault,o as setPasswordClearInterval};
