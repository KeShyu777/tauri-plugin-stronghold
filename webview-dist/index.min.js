var t=function(){return t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)};function e(t,e){void 0===e&&(e=!1);var r=window.crypto.getRandomValues(new Uint32Array(1))[0],n="_".concat(r);return Object.defineProperty(window,n,{value:function(r){return e&&Reflect.deleteProperty(window,n),null==t?void 0:t(r)},writable:!1,configurable:!0}),r}function r(r,n){return void 0===n&&(n={}),function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}c((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){return function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(o){return[2,new Promise((function(o,a){var i=e((function(t){o(t),Reflect.deleteProperty(window,"_".concat(s))}),!0),s=e((function(t){a(t),Reflect.deleteProperty(window,"_".concat(i))}),!0);window.__TAURI_IPC__(t({cmd:r,callback:i,error:s},n))}))]}))}))}function n(t){return"string"==typeof t?t:Array.from(t instanceof ArrayBuffer?new Uint8Array(t):t)}Object.freeze({__proto__:null,transformCallback:e,invoke:r,convertFileSrc:function(t,e){void 0===e&&(e="asset");var r=encodeURIComponent(t);return navigator.userAgent.includes("Windows")?"https://".concat(e,".localhost/").concat(r):"".concat(e,"://").concat(r)}});class o{constructor(t,e){this.type=t,this.payload=e}static generic(t,e){return new o("Generic",{vault:n(t),record:n(e)})}static counter(t,e){return new o("Counter",{vault:n(t),counter:e})}}class a{constructor(t,e){this.path=t,this.name=n(e)}getVault(t){return new s(this.path,this.name,n(t))}getStore(){return new i(this.path,this.name)}}class i{constructor(t,e){this.path=t,this.client=e}get(t){return r("plugin:stronghold|get_store_record",{snapshotPath:this.path,client:this.client,key:n(t)}).then((t=>Uint8Array.from(t)))}insert(t,e,o){return r("plugin:stronghold|save_store_record",{snapshotPath:this.path,client:this.client,key:n(t),value:e,lifetime:o})}remove(t){return r("plugin:stronghold|remove_store_record",{snapshotPath:this.path,client:this.client,key:n(t)}).then((t=>t?Uint8Array.from(t):null))}}class s extends class{constructor(t){this.procedureArgs=t}generateSLIP10Seed(t,e){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Generate",payload:{output:t,sizeBytes:e}}}).then((t=>Uint8Array.from(t)))}deriveSLIP10(t,e,n,o){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Derive",payload:{chain:t,input:{type:e,payload:n},output:o}}}).then((t=>Uint8Array.from(t)))}recoverBIP39(t,e,n){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Recover",payload:{mnemonic:t,passphrase:n,output:e}}}).then((t=>Uint8Array.from(t)))}generateBIP39(t,e){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Generate",payload:{output:t,passphrase:e}}}).then((t=>Uint8Array.from(t)))}getEd25519PublicKey(t){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"PublicKey",payload:{type:"Ed25519",privateKey:t}}}).then((t=>Uint8Array.from(t)))}signEd25519(t,e){return r("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"Ed25519Sign",payload:{privateKey:t,msg:e}}}).then((t=>Uint8Array.from(t)))}}{constructor(t,e,r){super({snapshotPath:t,client:e,vault:r}),this.path=t,this.client=n(e),this.name=n(r)}insert(t,e){return r("plugin:stronghold|save_secret",{snapshotPath:this.path,client:this.client,vault:this.name,recordPath:n(t),secret:e})}remove(t){return r("plugin:stronghold|remove_secret",{snapshotPath:this.path,client:this.client,vault:this.name,location:t})}}class c{constructor(t,e){this.path=t,this.reload(e)}reload(t){return r("plugin:stronghold|initialize",{snapshotPath:this.path,password:t})}unload(){return r("plugin:stronghold|destroy",{snapshotPath:this.path})}loadClient(t){return r("plugin:stronghold|load_client",{snapshotPath:this.path,client:n(t)}).then((()=>new a(this.path,t)))}createClient(t){return r("plugin:stronghold|create_client",{snapshotPath:this.path,client:n(t)}).then((()=>new a(this.path,t)))}save(){return r("plugin:stronghold|save",{snapshotPath:this.path})}}export{a as Client,o as Location,i as Store,c as Stronghold,s as Vault};
