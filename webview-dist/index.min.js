var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)};function e(t,e){void 0===e&&(e=!1);var n=window.crypto.getRandomValues(new Uint32Array(1))[0],r="_".concat(n);return Object.defineProperty(window,r,{value:function(n){return e&&Reflect.deleteProperty(window,r),null==t?void 0:t(n)},writable:!1,configurable:!0}),n}function n(n,r){return void 0===r&&(r={}),function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function a(t){try{c(r.next(t))}catch(t){s(t)}}function i(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,i)}c((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){return function(t,e){var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}(this,(function(o){return[2,new Promise((function(o,s){var a=e((function(t){o(t),Reflect.deleteProperty(window,"_".concat(i))}),!0),i=e((function(t){s(t),Reflect.deleteProperty(window,"_".concat(a))}),!0);window.__TAURI_IPC__(t({cmd:n,callback:a,error:i},r))}))]}))}))}Object.freeze({__proto__:null,transformCallback:e,invoke:n,convertFileSrc:function(t,e){void 0===e&&(e="asset");var n=encodeURIComponent(t);return navigator.userAgent.includes("Windows")?"https://".concat(e,".localhost/").concat(n):"".concat(e,"://").concat(n)}});class r{constructor(t,e){this.type=t,this.payload=e}static generic(t,e){return new r("Generic",{vault:t,record:e})}static counter(t,e){return new r("Counter",{vault:t,counter:e})}}function o(t){return n("plugin:stronghold|set_password_clear_interval",{interval:t})}class s{constructor(t,e){this.path=t,this.name=e}getVault(t){return new i(this.path,this.name,t)}getStore(){return new a(this.path,this.name)}}class a{constructor(t,e){this.path=t,this.client=e}get(t){return n("plugin:stronghold|get_store_record",{snapshotPath:this.path,client:this.client,key:t})}insert(t,e,r){return n("plugin:stronghold|save_store_record",{snapshotPath:this.path,client:this.client,key:t,value:e,lifetime:r})}remove(t){return n("plugin:stronghold|remove_store_record",{snapshotPath:this.path,client:this.client,key:t})}}class i extends class{constructor(t){this.procedureArgs=t}generateSLIP10Seed(t,e){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Generate",payload:{output:t,sizeBytes:e}}})}deriveSLIP10(t,e,r,o){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"SLIP10Derive",payload:{chain:t,input:{type:e,payload:r},output:o}}})}recoverBIP39(t,e,r){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Recover",payload:{mnemonic:t,passphrase:r,output:e}}})}generateBIP39(t,e){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"BIP39Generate",payload:{output:t,passphrase:e}}})}getEd25519PublicKey(t){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"PublicKey",payload:{type:"Ed25519",privateKey:t}}})}sign(t,e){return n("plugin:stronghold|execute_procedure",{...this.procedureArgs,procedure:{type:"Ed25519Sign",payload:{privateKey:t,msg:e}}})}}{constructor(t,e,n){super({snapshotPath:t,client:e,vault:n}),this.path=t,this.client=e,this.name=n}insert(t,e){return n("plugin:stronghold|save_secret",{snapshotPath:this.path,client:this.client,vault:this.name,recordPath:t,secret:e})}remove(t){return n("plugin:stronghold|remove_secret",{snapshotPath:this.path,client:this.client,vault:this.name,location:t})}}class c{constructor(t){this.path=t}connect(t){return n("plugin:stronghold|p2p_connect",{snapshotPath:this.path,peer:t})}stop(){return n("plugin:stronghold|p2p_stop",{snapshotPath:this.path})}startListening(t){return n("plugin:stronghold|p2p_start_listening",{snapshotPath:this.path,addr:t})}stopListening(){return n("plugin:stronghold|p2p_stop_listening",{snapshotPath:this.path})}addPeerAddr(t,e){return n("plugin:stronghold|p2p_add_peer",{snapshotPath:this.path,peerId:t,addr:e})}}class u{constructor(t,e){this.path=t,this.reload(e)}reload(t){return n("plugin:stronghold|initialize",{snapshotPath:this.path,password:t})}unload(){return n("plugin:stronghold|destroy",{snapshotPath:this.path})}loadClient(t){return n("plugin:stronghold|load_client",{snapshotPath:this.path,client:t}).then((()=>new s(this.path,t)))}createClient(t){return n("plugin:stronghold|create_client",{snapshotPath:this.path,client:t}).then((()=>new s(this.path,t)))}save(){return n("plugin:stronghold|save",{snapshotPath:this.path})}spawnCommunication(t,e,r){return n("plugin:stronghold|p2p_spawn",{snapshotPath:this.path,client:t,config:e,keypair:r}).then((()=>new c(this.path)))}}export{s as Client,c as Communication,r as Location,a as Store,u as Stronghold,i as Vault,o as setPasswordClearInterval};
